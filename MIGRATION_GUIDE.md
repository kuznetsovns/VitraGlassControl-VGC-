# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤–∏—Ç—Ä–∞–∂–µ–π –≤ Supabase

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ UUID, —Å—Ç–∞—Ä—ã–µ –≤–∏—Ç—Ä–∞–∂–∏ –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã —Å `Date.now().toString()` –æ—Å—Ç–∞–ª–∏—Å—å –≤ localStorage –∏ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å Supabase. –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ç–æ–º—É, —á—Ç–æ:

1. –ü—Ä–∏ –∑–∞–¥–∞–Ω–∏–∏ –¥–µ—Ñ–µ–∫—Ç–∞ –≤–∏—Ç—Ä–∞–∂—É, –¥–µ—Ñ–µ–∫—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ (fallback)
2. –í–∏—Ç—Ä–∞–∂ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤–æ –≤–∫–ª–∞–¥–∫–µ "–î–µ—Ñ–µ–∫—Ç–æ–≤–∫–∞" (–∫–æ—Ç–æ—Ä–∞—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ Supabase)

## –†–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –≤–∏—Ç—Ä–∞–∂–µ–π

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (http://localhost:5179)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"–ü–ª–∞–Ω —ç—Ç–∞–∂–µ–π"**
3. –í dropdown –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **"üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –≤ Supabase"**
4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
5. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ú–∏–≥—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ü–µ—Ä–µ–Ω–µ—Å–µ—Ç –≤—Å–µ –≤–∏—Ç—Ä–∞–∂–∏ –∏–∑ localStorage –≤ Supabase
- –°–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–µ UUID –¥–ª—è –≤–∏—Ç—Ä–∞–∂–µ–π —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º–∏ ID
- –ü—Ä–æ–ø—É—Å—Ç–∏—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã
- –°–æ—Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ –¥–µ—Ñ–µ–∫—Ç—ã –∏ ID —Å–µ–≥–º–µ–Ω—Ç–æ–≤

### –í–∞—Ä–∏–∞–Ω—Ç 2: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ –≤–∏—Ç—Ä–∞–∂–∏

–ï—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞ –∏–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –Ω–∞—á–∞—Ç—å —Å —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞:

1. –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ –≤–∏—Ç—Ä–∞–∂–∏ –∑–∞–Ω–æ–≤–æ –Ω–∞ –ø–ª–∞–Ω–µ —ç—Ç–∞–∂–∞
2. –ù–∞–∑–Ω–∞—á—å—Ç–µ –∏–º ID (–∫–Ω–æ–ø–∫–∞ "üÜî –ó–∞–¥–∞—Ç—å ID —Å–µ–∫—Ü–∏–π")
3. –°–æ–∑–¥–∞–π—Ç–µ –¥–µ—Ñ–µ–∫—Ç–æ–≤–∫—É (–∫–Ω–æ–ø–∫–∞ "üìã –°–æ–∑–¥–∞—Ç—å –¥–µ—Ñ–µ–∫—Ç–æ–≤–∫—É")
4. –ó–∞–¥–∞–π—Ç–µ –¥–µ—Ñ–µ–∫—Ç—ã

–ù–æ–≤—ã–µ –≤–∏—Ç—Ä–∞–∂–∏ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ Supabase —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ UUID.

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –≤–∏—Ç—Ä–∞–∂–∞ –∏—â–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏:

**–£—Å–ø–µ—à–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–∏—Ç—Ä–∞–∂–∞:**
```
üìù Creating placed vitrage: –ù–∞–∑–≤–∞–Ω–∏–µ
üíæ Inserting into Supabase...
‚úÖ Placed vitrage created in Supabase: uuid
```

**–£—Å–ø–µ—à–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–µ—Ñ–µ–∫—Ç–∞:**
```
üîß Updating segment defects for vitrage: uuid
üìä Defects count: X defects in Y segments
‚úÖ Updated defects for vitrage uuid: X defects in Y segments
```

**–£—Å–ø–µ—à–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è –¥–µ—Ñ–µ–∫—Ç–æ–≤–∫–∏:**
```
üîç Loading vitrages for defect tracking, object: uuid
üì¶ Loaded N vitrages from Supabase
üéØ Filtered M vitrages with IDs from N total
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ –≤–∫–ª–∞–¥–∫–µ "–î–µ—Ñ–µ–∫—Ç–æ–≤–∫–∞"

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"–î–µ—Ñ–µ–∫—Ç–æ–≤–∫–∞"**
2. –í—ã–±–µ—Ä–∏—Ç–µ –æ–±—ä–µ–∫—Ç
3. –í–∏—Ç—Ä–∞–∂–∏ —Å –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º–∏ ID –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏
4. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É —á—Ç–æ–±—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–µ—Ñ–µ–∫—Ç—ã

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Supabase Dashboard

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://supabase.com/dashboard
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
3. Table Editor ‚Üí **placed_vitrages**
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∑–∞–ø–∏—Å–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª—è:
   - `id` - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å UUID
   - `object_id` - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å UUID
   - `full_id` - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –¥–ª—è –≤–∏—Ç—Ä–∞–∂–µ–π —Å ID
   - `segment_defects` - JSONB —Å –¥–µ—Ñ–µ–∫—Ç–∞–º–∏
   - `total_defects_count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ—Ñ–µ–∫—Ç–æ–≤

## Troubleshooting

### –ú–∏–≥—Ä–∞—Ü–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏

**–û—à–∏–±–∫–∞:** `invalid input syntax for type uuid`
**–ü—Ä–∏—á–∏–Ω–∞:** object_id –Ω–µ–≤–∞–ª–∏–¥–µ–Ω (–Ω–µ UUID)
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –æ–±—ä–µ–∫—Ç—ã —Å–æ–∑–¥–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ MainPage

**–û—à–∏–±–∫–∞:** `violates foreign key constraint`
**–ü—Ä–∏—á–∏–Ω–∞:** object_id —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –æ–±—ä–µ–∫—Ç
**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–π—Ç–µ –æ–±—ä–µ–∫—Ç –∑–∞–Ω–æ–≤–æ –∏–ª–∏ —É–¥–∞–ª–∏—Ç–µ –≤–∏—Ç—Ä–∞–∂

### –î–µ—Ñ–µ–∫—Ç—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º:** –í –∫–æ–Ω—Å–æ–ª–∏ `‚ö†Ô∏è Using localStorage fallback`
**–ü—Ä–∏—á–∏–Ω–∞:** –í–∏—Ç—Ä–∞–∂ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ Supabase
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ç—Ä–∞–∂ –∑–∞–Ω–æ–≤–æ

### –í–∏—Ç—Ä–∞–∂–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –¥–µ—Ñ–µ–∫—Ç–æ–≤–∫–µ

**–°–∏–º–ø—Ç–æ–º:** –í–∫–ª–∞–¥–∫–∞ "–î–µ—Ñ–µ–∫—Ç–æ–≤–∫–∞" –ø—É—Å—Ç–∞—è
**–ü—Ä–∏—á–∏–Ω–∞:** –í–∏—Ç—Ä–∞–∂–∏ –≤ localStorage, –Ω–æ –Ω–µ –≤ Supabase
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é

**–°–∏–º–ø—Ç–æ–º:** –í–∏—Ç—Ä–∞–∂–∏ –µ—Å—Ç—å –Ω–æ –Ω–µ—Ç ID
**–ü—Ä–∏—á–∏–Ω–∞:** ID –Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω—ã
**–†–µ—à–µ–Ω–∏–µ:** –ù–∞–∑–Ω–∞—á—å—Ç–µ ID —á–µ—Ä–µ–∑ "üÜî –ó–∞–¥–∞—Ç—å ID —Å–µ–∫—Ü–∏–π"

## –õ–æ–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –≤–∫–ª—é—á–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ –∏—â–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è:

- üè¢ - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –æ–±—ä–µ–∫—Ç–µ
- üìç - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º –ø–ª–∞–Ω–µ
- üìù - –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ç—Ä–∞–∂–∞
- üíæ - –í—Å—Ç–∞–≤–∫–∞ –≤ Supabase
- ‚úÖ - –£—Å–ø–µ—à–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
- ‚ùå - –û—à–∏–±–∫–∞ Supabase
- ‚ö†Ô∏è - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ/fallback –Ω–∞ localStorage
- üîß - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–µ—Ñ–µ–∫—Ç–æ–≤
- üìä - –ü–æ–¥—Å—á–µ—Ç –¥–µ—Ñ–µ–∫—Ç–æ–≤
- üîç - –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏—Ç—Ä–∞–∂–µ–π
- üì¶ - –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ Supabase
- üéØ - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤–∏—Ç—Ä–∞–∂–µ–π

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –æ–¥–∏–Ω —Ä–∞–∑** –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç** –≤ Supabase Dashboard
3. **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ localStorage** –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
4. **–°–æ–∑–¥–∞–≤–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏** –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π (—ç–∫—Å–ø–æ—Ä—Ç –∏–∑ Supabase)
5. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –æ–¥–Ω–æ–º –æ–±—ä–µ–∫—Ç–µ** –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –ø–æ–º–æ–≥–ª–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase (—Ñ–∞–π–ª `.env`)
- –ü—Ä–∏–º–µ–Ω–µ–Ω—ã –ª–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ 007 –∏ 008
- –õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- –¢–∞–±–ª–∏—Ü—ã –≤ Supabase Dashboard
